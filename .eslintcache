[{"/home/tiago/projects/vizir/falemais-frontend/src/index.tsx":"1","/home/tiago/projects/vizir/falemais-frontend/src/reportWebVitals.ts":"2","/home/tiago/projects/vizir/falemais-frontend/src/App.tsx":"3","/home/tiago/projects/vizir/falemais-frontend/src/routes/routes.tsx":"4","/home/tiago/projects/vizir/falemais-frontend/src/shared/components/header/header.tsx":"5","/home/tiago/projects/vizir/falemais-frontend/src/pages/phone_plans/phone-plans.tsx":"6","/home/tiago/projects/vizir/falemais-frontend/src/pages/rate/rate.tsx":"7","/home/tiago/projects/vizir/falemais-frontend/src/pages/home/home.tsx":"8","/home/tiago/projects/vizir/falemais-frontend/src/pages/reports-new/reports-new.tsx":"9","/home/tiago/projects/vizir/falemais-frontend/src/services/api.ts":"10","/home/tiago/projects/vizir/falemais-frontend/src/pages/reports-new/components/select.tsx":"11"},{"size":501,"mtime":1607906917560,"results":"12","hashOfConfig":"13"},{"size":425,"mtime":1607902490190,"results":"14","hashOfConfig":"13"},{"size":531,"mtime":1607986020740,"results":"15","hashOfConfig":"13"},{"size":631,"mtime":1607986058060,"results":"16","hashOfConfig":"13"},{"size":399,"mtime":1607986012020,"results":"17","hashOfConfig":"13"},{"size":74,"mtime":1607912544050,"results":"18","hashOfConfig":"13"},{"size":78,"mtime":1607912551250,"results":"19","hashOfConfig":"13"},{"size":2644,"mtime":1607920965210,"results":"20","hashOfConfig":"13"},{"size":3032,"mtime":1607985555930,"results":"21","hashOfConfig":"13"},{"size":106,"mtime":1607985831190,"results":"22","hashOfConfig":"13"},{"size":851,"mtime":1607985591910,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1vr7rkh",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"26"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"26"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50"},"/home/tiago/projects/vizir/falemais-frontend/src/index.tsx",[],["51","52"],"/home/tiago/projects/vizir/falemais-frontend/src/reportWebVitals.ts",[],"/home/tiago/projects/vizir/falemais-frontend/src/App.tsx",[],"/home/tiago/projects/vizir/falemais-frontend/src/routes/routes.tsx",["53","54"],"import { lazy } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport ReportsNew from \"../pages/reports-new/reports-new\";\n\nconst Home = lazy(() => import(\"../pages/home/home\"));\nconst PhonePlans = lazy(() => import(\"../pages/phone_plans/phone-plans\"));\nconst Rate = lazy(() => import(\"../pages/rate/rate\"));\n\nexport default function Routes() {\n  return (\n    <Switch>\n      <Redirect exact path=\"/\" to=\"reports\" />\n      <Route path=\"/reports\" exact component={Home} />\n      <Route path=\"/reports/new\" exact component={ReportsNew} />\n      <Redirect exact path=\"**\" to=\"reports\" />\n    </Switch>\n  );\n}\n","/home/tiago/projects/vizir/falemais-frontend/src/shared/components/header/header.tsx",[],"/home/tiago/projects/vizir/falemais-frontend/src/pages/phone_plans/phone-plans.tsx",[],"/home/tiago/projects/vizir/falemais-frontend/src/pages/rate/rate.tsx",[],"/home/tiago/projects/vizir/falemais-frontend/src/pages/home/home.tsx",["55"],"import \"./home.scss\";\nimport { useEffect, useState } from \"react\";\nimport { api } from \"../../services/api\";\nimport { Link } from \"react-router-dom\";\n\ninterface IPlan {\n  id: string;\n  prefixOrigin: string;\n  prefixDestiny: string;\n  minutesSpent: number;\n  namePlan: string;\n  withPlan: string;\n  withoutPlan: string;\n}\n\nexport default function Home() {\n  const [plans, setPlans] = useState<IPlan[]>([]);\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  async function getData() {\n    try {\n      const res: any = await api.get(\"/price-report\");\n      console.log(\"dbg ~ getData ~ res\", res);\n\n      const filteredPlans: IPlan[] = res.data.map((report) => {\n        return {\n          id: report.id,\n          prefixOrigin: report.rate.prefixOrigin,\n          prefixDestiny: report.rate.prefixDestiny,\n          minutesSpent: report.minutesSpent,\n          namePlan: report.phonePlan.name,\n          withPlan: report.withPlan.toFixed(2),\n          withoutPlan: report.withoutPlan.toFixed(2),\n        };\n      });\n      if (!filteredPlans.length) return null;\n      setPlans(filteredPlans);\n      console.log(\"dbg ~ getData ~ plans\", filteredPlans);\n    } catch (error) {\n      console.log(\"dbg ~ getData ~ error\", error);\n    }\n  }\n\n  function clicked(e, id) {\n    e.preventDefault();\n    console.log(\"dbg ~ clicked ~ e\", id);\n  }\n\n  function newReport(e) {\n    e.preventDefault();\n  }\n\n  return (\n    <div className=\"r-home l-home\">\n      {plans.length && (\n        <table className=\"centered c-home-table\">\n          <thead>\n            <tr>\n              <th>Origin</th>\n              <th>Destiny</th>\n              <th>Time</th>\n              <th>Phone plan</th>\n              <th>With plan</th>\n              <th>Without plan</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {plans.map((plan) => (\n              <tr onClick={(e) => clicked(e, plan.id)} key={plan.id}>\n                <td className=\"c-home-table__items\">{plan.prefixDestiny}</td>\n                <td className=\"c-home-table__items\">{plan.prefixDestiny}</td>\n                <td className=\"c-home-table__items\">{plan.minutesSpent}</td>\n                <td className=\"c-home-table__items\">{plan.namePlan}</td>\n                <td className=\"c-home-table__items\">{plan.withPlan}</td>\n                <td className=\"c-home-table__items\">{plan.withoutPlan}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      <Link\n        to=\"/reports/new\"\n        className=\"btn-floating btn-large waves-effect waves-light red c-home-button\"\n      >\n        <i className=\"material-icons\">add</i>\n      </Link>\n    </div>\n  );\n}\n","/home/tiago/projects/vizir/falemais-frontend/src/pages/reports-new/reports-new.tsx",["56"],"import { useEffect, useState } from \"react\";\nimport { api } from \"../../services/api\";\nimport { Select } from \"./components/select\";\ndeclare const M;\n\nexport default function ReportsNew() {\n  const [rates, setRates] = useState();\n  const [selectedRate, setSelectedRate] = useState();\n  const [selectedPlan, setSelectedPlan] = useState();\n  const [phonePlans, setPhonePlans] = useState();\n  const [minutesSpent, setMinutesSpent] = useState(0);\n\n  useEffect(() => {\n    getRates();\n    getPhonePlans();\n  }, []);\n\n  async function getRates() {\n    const res: any = await api.get(\"/rate\");\n\n    const withDescription = res.data.map((rate) => {\n      return {\n        ...rate,\n        description: `Origin: ${rate.prefixOrigin} - Destiny: ${rate.prefixDestiny} - price minute: ${rate.price}`,\n      };\n    });\n    setRates(withDescription);\n    console.log(\"dbg ~ getRates ~ rates\", res);\n  }\n\n  async function getPhonePlans() {\n    const res: any = await api.get(\"/phone-plans\");\n    const withDescription = res.data.map((plan) => {\n      return { ...plan, description: plan.name };\n    });\n    setPhonePlans(withDescription);\n    console.log(\"dbg ~ getRates ~ rates\", res);\n  }\n\n  function handleMinutes(e) {\n    const numb = Number(e.target.value);\n    if (numb >= 0) {\n      setMinutesSpent(numb);\n    }\n  }\n\n  async function submit() {\n    const data = {\n      minutesSpent: Number(minutesSpent),\n      rate: {\n        id: selectedRate,\n      },\n      phonePlan: {\n        id: selectedPlan,\n      },\n    };\n\n    try {\n      const res = await api.post(\"/report-plans\", data);\n      console.log(\"dbg ~ submit ~ res\", res);\n    } catch (error) {\n      console.log(\"dbg ~ submit ~ error\", error);\n    }\n  }\n\n  return (\n    <div className=\"reports-new\">\n      <div className=\"row\">\n        <div className=\"col s12 m6\">\n          <Select\n            data={rates}\n            label=\"Choose one prefix and destiny\"\n            onChange={setSelectedRate}\n          />\n        </div>\n        <div className=\"col s12 m6\">\n          <Select\n            data={phonePlans}\n            label=\"Choose one prefix and destiny\"\n            onChange={setSelectedPlan}\n          />\n        </div>\n      </div>\n      <div className=\"row\">\n        <form className=\"col s12 m6\">\n          <div className=\"row\">\n            <div className=\"input-field col s12\">\n              <input\n                placeholder=\"minutes\"\n                id=\"minutes_spent\"\n                type=\"text\"\n                className=\"validate\"\n                onChange={handleMinutes}\n                value={minutesSpent}\n              />\n              <label htmlFor=\"minutes_spent\">\n                Desired minutes minutes you want to spend\n              </label>\n            </div>\n          </div>\n        </form>\n      </div>\n      <button\n        className=\"btn waves-effect waves-light right\"\n        type=\"submit\"\n        name=\"action\"\n        onClick={submit}\n      >\n        Submit\n        <i className=\"material-icons right\">send</i>\n      </button>\n    </div>\n  );\n}\n","/home/tiago/projects/vizir/falemais-frontend/src/services/api.ts",[],"/home/tiago/projects/vizir/falemais-frontend/src/pages/reports-new/components/select.tsx",["57"],"import { useState } from \"react\";\n\ninterface IProps {\n  description: string;\n  onchange: Function;\n}\n\nexport function Select(props) {\n  const [value, setValue] = useState(\"0\");\n\n  function onChanged(e: React.ChangeEvent<HTMLSelectElement>) {\n    e.preventDefault();\n    console.log(\"dbg ~ selectChanged ~ e\", e.target.value);\n    setValue(e.target.value);\n    props.onChange(e.target.value);\n  }\n\n  if (!props?.data) {\n    return null;\n  }\n\n  return (\n    <>\n      <label>{props.label}</label>\n      <select\n        className=\"browser-default c-select\"\n        value={value}\n        onChange={(e) => onChanged(e)}\n      >\n        <option value=\"0\">{props.label}</option>\n        {props?.data.map((item) => (\n          <option key={item.id} value={item.id}>\n            {item.description}\n          </option>\n        ))}\n      </select>\n    </>\n  );\n}\n",{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","replacedBy":"61"},{"ruleId":"62","severity":1,"message":"63","line":6,"column":7,"nodeType":"64","messageId":"65","endLine":6,"endColumn":17},{"ruleId":"62","severity":1,"message":"66","line":7,"column":7,"nodeType":"64","messageId":"65","endLine":7,"endColumn":11},{"ruleId":"62","severity":1,"message":"67","line":52,"column":12,"nodeType":"64","messageId":"65","endLine":52,"endColumn":21},{"ruleId":"62","severity":1,"message":"68","line":4,"column":15,"nodeType":"64","messageId":"65","endLine":4,"endColumn":16},{"ruleId":"62","severity":1,"message":"69","line":3,"column":11,"nodeType":"64","messageId":"65","endLine":3,"endColumn":17},"no-native-reassign",["70"],"no-negated-in-lhs",["71"],"@typescript-eslint/no-unused-vars","'PhonePlans' is assigned a value but never used.","Identifier","unusedVar","'Rate' is assigned a value but never used.","'newReport' is defined but never used.","'M' is defined but never used.","'IProps' is defined but never used.","no-global-assign","no-unsafe-negation"]